# {{cookiecutter.project_name}}

## Getting started


### Python setup

Requires {{cookiecutter.python_version}}+

This project uses the [Poetry](https://python-poetry.org/) package manager.
Please follow the [official](https://python-poetry.org/docs/#installation) documentation for installation details

Finally, templates are instantiated using [Cruft](https://github.com/cruft/cruft)


### GitHub setup

Generate a project in the terminal

```shell
cruft create https://github.com/C4IROcean/template-tornado-app
```

Create a git repository for the newly generated project and create the first commit:

```shell
git init
git add .
git commit -m "Initial commit: project generated by template-tornado-app"
```

Then, create a new repo called `{{cookiecutter.github_repo_name}}` following the prompts at:
https://github.com/organizations/{{ cookiecutter.github_username }}/repositories/new

Upon creation, push the repository to GitHub:

```shell
git remote add origin https://github.com/{{cookiecutter.github_username}}/{{cookiecutter.github_repo_name}}
git push -u origin master
```

It's recommended to setup some protection rules for the master branch at:
https://github.com/{{ cookiecutter.github_username }}/{{ cookiecutter.github_repo_name }}/settings/branches

- Require a pull request before merging
- Require approvals

For the github actions to work, the following secrets should also be set at:
https://github.com/{{ cookiecutter.github_username }}/{{ cookiecutter.github_repo_name }}/settings/secrets/actions

- `AGENT_OCEAN_DEPLOY_KEY` - Deployment key from the [agent-ocean repo]()
- `ACR_PASSWORD` - Azure Container Registry password
- `ACR_REPO` - Azure Container Registry repository
- `ACR_USERNAME` - Azure Container Registry username
- `AZURE_CLIENT_ID` - Azure AD App id for the project
- `AZURE_SUBSCRIPTION_ID` - Azure subscription ID
- `AZURE_TENANT_ID` - Azure tenant ID

In addition, two github environments `dev` and `prod` should be configured with the following secrets in each:

- `AKS_CLUSTER_NAME` - Azure Kubernetes Service cluster name
- `AKS_RESOURCE_GROUP_NAME` - Azure resource group of the AKS cluster


### Project setup

With Poetry installed, you set up the virtual environment and install the dependencies with a single command:

```shell
poetry install
```

Configure the pre-commit hooks

```shell
pre-commit install
```

